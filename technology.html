<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>专利技术分布图</title>
    <link rel="stylesheet" href="./layui-src/dist/css/layui.css">
    <script src="./layui-src/dist/layui.js"></script>

</head>

<body class="layui-layout-body">
    <div class="layui-layout layui-layout-admin">
        <div class="layui-header">
            <div class="layui-logo">dataV 数据可视化作业</div>
            <!-- 头部区域（可配合layui已有的水平导航） -->
            <ul class="layui-nav layui-layout-left">
                <li class="layui-nav-item"><a href="">可视化主页</a></li>

            </ul>
            <ul class="layui-nav layui-layout-right">
                <li class="layui-nav-item">
                    <a href="javascript:;">
                        <img src="https://avatars0.githubusercontent.com/u/22214474?s=460&v=4" class="layui-nav-img">
                        沉醉不知归路
                    </a>
                    <dl class="layui-nav-child">
                        <dd><a href="">github</a></dd>
                    </dl>
                </li>
            </ul>
        </div>

        <div class="layui-side layui-bg-black">
            <div class="layui-side-scroll">
                <!-- 左侧导航区域（可配合layui已有的垂直导航） -->
                <ul class="layui-nav layui-nav-tree" lay-filter="test">
                    <li class="layui-nav-item"><a href="index.html">专利申请趋势图</a></li>
                    <li class="layui-nav-item"><a href="public.html">专利公开趋势</a></li>
                    <li class="layui-nav-item"><a href="type.html">专利类型</a></li>
                    <li class="layui-nav-item layui-nav-itemed"><a href="">技术分布</a></li>
                    <li class="layui-nav-item"><a href="researcher.html">研发人员数量趋势</a></li>
                </ul>
            </div>
        </div>
        <div class="layui-body">
            <!-- 内容主体区域 -->
            <form class="layui-form" action="" style="margin:15px;">
                <div class="layui-form-item">
                    <div class="layui-inline">
                        <label class="layui-form-label">年份选择</label>
                        <div class="layui-input-inline">
                            <select name="quiz">
                                <option value="1999">1999</option>
                                <option value="2000">2000</option>
                                <option value="2001">2001</option>
                            </select>
                        </div>
                    </div>
                    <div class="layui-inline">
                        <label class="layui-form-label">组别统计</label>
                        <div class="layui-input-inline">
                            <select name="modules" lay-verify="required" lay-search="">
                                <option value="big">大组统计</option>
                                <option value="little">小组统计</option>
                            </select>
                        </div>
                    </div>
                    <div class="layui-inline">
                        <button class="layui-btn" lay-submit="" lay-filter="submit">立即提交</button>
                    </div>
                </div>
            </form>


            <div id="map" style="padding: 15px; height:560px;">
            </div>
        </div>
        <div class="layui-footer">
            <!-- 底部固定区域 -->
            © 2018-2019 github/hellolijj 李俊君 李文龙 章回
        </div>
    </div>
    <script>
        //JavaScript代码区域
        layui.use('element', function () {
            var element = layui.element;
        });
        layui.use('form', function () {
            var form = layui.form;
            //监听提交
            form.on('submit(formDemo)', function (data) {
                layer.msg(JSON.stringify(data.field));
                return false;
            });
        });
    </script>
    <script src="./public/echarts.common.min.js"></script>
    <script>
        
        var myChart = echarts.init(document.getElementById('map'));
        var big_data = {
            "2000-big":[
                ['C12N15', 'H01L21', 'H04Q7', 'G06F1', 'A61K7', 'A61K31', 'G06F3', 'H04N5', 'H01R12', 'H04N7', 'G06F17', 'G11B7', 'A61K35', 'C02F1', 'H04M1', 'H04B7', 'G06F15', 'H04L12', 'B41J2', 'C07K14'],
                [643, 515, 490, 85, 407, 402, 155, 213, 68, 211, 225, 214, 219, 95, 128, 197, 146, 162, 129, 158],
                [0, 11, 15, 352, 1, 0, 140, 64, 179, 29, 14, 20, 1, 112, 77, 4, 26, 7, 32, 0]
            ],
            "2000-little":[
                ['A61K35/78', 'H04Q7/32', 'H04B7/26', 'H01R13/648', 'C12N15/63', 'C12Q1/68', 'C12N15/12', 'H04Q7/20', 'G06F1/20', 'A61F13/15', 'C07K16/18', 'C07K14/435', 'G06F3/023', 'G11B20/10', 'A61K7/48', 'G06F17/60', 'C12N15/10', 'C07H21/00', 'G06F3/033', 'H01R13/629'],
                [159, 124, 129, 19, 118, 117, 110, 104, 17, 93, 93, 89, 32, 80, 75, 70, 72, 69, 31, 9],
                [1, 6, 0, 107, 0, 0, 0, 2, 84, 7, 0, 0, 56, 2, 1, 5, 0, 0, 37, 57]
            ],
            "1999-little":[
                ['G11B7/00', 'A61F13/15', 'H04Q7/32', 'H04Q7/22', 'H04Q7/38', 'A61K31/44', 'H04Q7/20', 'A61K7/48', 'H04B7/26', 'H01L21/82', 'H01R9/09', 'A61K31/40', 'H04Q7/14', 'A61K31/445', 'C12Q1/68', 'C12N1/21', 'H01L21/00', 'F24C7/02', 'C07D401/12', 'A61K31/495'],
                [144, 106, 104, 117, 117, 107, 105, 97, 95, 84, 32, 80, 67, 74, 71, 71, 67, 60, 67, 67],
                [4, 13, 14, 0, 0, 0, 1, 0, 1, 0, 48, 0, 8, 0, 0, 0, 3, 9, 0, 0]
            ],
            "1999-big":[
                ['H01L21', 'H04Q7', 'C12N15', 'H01R13', 'A61K7', 'G11B7', 'H04N7', 'A61K38', 'H04N5', 'G01N33', 'C11D3', 'A61K35', 'H04B7', 'H04L12', 'G06F17', 'C02F1', 'A61K9', 'A23L1', 'H04B1', 'H01L27'],
                [881, 726, 557, 220, 423, 333, 297, 287, 248, 250, 269, 263, 244, 237, 221, 134, 224, 212, 198, 213],
                [12, 27, 0, 295, 0, 14, 14, 0, 36, 33, 0, 1, 2, 4, 12, 98, 3, 15, 21, 3]
            ],
            "2001-big":[
                ['A61K38', 'C07K16', 'C12Q1', 'A61P31', 'A61K31', 'C07K14', 'G01N33', 'A61P35', 'A61K39', 'C12P21', 'A61P37', 'C07H21', 'A61P7', 'H01R13', 'H04Q7', 'G06F1', 'H01L21', 'G06F17', 'H01R12', 'G06F3'],
                [2619, 2433, 2185, 2176, 1361, 1305, 1218, 1193, 1153, 1141, 1104, 1101, 1085, 225, 523, 118, 507, 357, 118, 194],
                [0, 0, 7, 0, 0, 0, 19, 0, 0, 0, 0, 0, 0, 382, 31, 419, 20, 9, 189, 98],
            ],
            "2001-little":[
                ['C12N15/63', 'A61P35/00', 'C12N15/12', 'C12N15/64', 'A61K39/395', 'G01N33/68', 'C07H21/00', 'C12N15/10', 'A61K38/17', 'A61P37/00', 'C12P21/00', 'A61P31/00', 'A61P7/00', 'A61P31/18', 'C12N15/11', 'C07K16/00', 'A61K31/7088', 'C07K16/18', 'A61K38/16', 'C07K14/435'],
                [1635, 1191, 1189, 1131, 1119, 1097, 1097, 1092, 1089, 1081, 1071, 1071, 1067, 1052, 1045, 1026, 1023, 975, 960, 884],
                [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
            ]

        };


        console.log(big_data)
        
        
        // 指定图表的配置项和数据
        option = {
            title: [{
                text: '技术分布图',
            }],

            tooltip: {
                trigger: 'axis',
                axisPointer: {            // 坐标轴指示器，坐标轴触发有效
                    type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
                }
            },
            legend: {
                data: ['发明专利', '实用新型']
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '3%',
                containLabel: true
            },
            xAxis: {
                type: 'value'
            },
            yAxis: {
                type: 'category',
                data: big_data["1999-big"][0]
            },
            series: [
                {
                    name: '发明专利',
                    type: 'bar',
                    stack: '总量',
                    label: {
                        normal: {
                            show: true,
                            position: 'insideRight'
                        }
                    },
                    data: big_data["1999-big"][1]
                },
                {
                    name: '实用新型',
                    type: 'bar',
                    stack: '总量',
                    label: {
                        normal: {
                            show: true,
                            position: 'insideRight'
                        }
                    },
                    data: big_data["1999-big"][2]
                }
            ]
        };

        // 使用刚指定的配置项和数据显示图表。
        

        layui.use('form', function () {
            var form = layui.form;
            form.on('submit(submit)', function (data) {
                console.log(data.field)
                console.log(big_data)
                    option.yAxis.data = big_data[data.field.quiz+"-"+data.field.modules][0]
                    option.series[0].data = big_data[data.field.quiz+"-"+data.field.modules][1]
                    option.series[1].data = big_data[data.field.quiz+"-"+data.field.modules][2]
                myChart.setOption(option);
                return false;
                
            })
        });

        myChart.setOption(option);

    </script>
</body>